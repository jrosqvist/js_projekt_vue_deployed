webpackJsonp([1],{"/6Eg":function(e,t){},"5Lc5":function(e,t){},"G+KZ":function(e,t){},ISM9:function(e,t){},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("7+uW"),n={data:function(){return{auth:"",user:""}},methods:{logout:function(){localStorage.removeItem("usertoken")},toggleMenu:function(){$("#mobile-menu").toggleClass("open"),$("#main-nav ul").toggleClass("open")},toggleLinks:function(){window.matchMedia("(max-width: 800px)").matches&&($("#mobile-menu").toggleClass("open"),$("#main-nav ul").toggleClass("open"))}},beforeCreate:function(){var e=localStorage.usertoken;this.log=!!e}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",{attrs:{id:"mainheader"}},[e._m(0),e._v(" "),r("div",{attrs:{id:"mobile-container"}},[r("div",{attrs:{id:"mobile-menu"},on:{click:e.toggleMenu}},[r("span",[e._v(" ")]),e._v(" "),r("span",[e._v(" ")]),e._v(" "),r("span",[e._v(" ")])])]),e._v(" "),r("nav",{attrs:{id:"main-nav"},on:{click:e.toggleLinks}},[r("ul",[r("li",[r("router-link",{attrs:{to:"/"}},[e._v("Hem")])],1),e._v(" "),0==e.log?r("li",[r("router-link",{attrs:{to:"/register"}},[e._v("Registrera")])],1):e._e(),e._v(" "),0==e.log?r("li",[r("router-link",{attrs:{to:"/login"}},[e._v("Logga in")])],1):e._e(),e._v(" "),1==e.log?r("li",[r("router-link",{attrs:{to:"/posts"}},[e._v("Böcker")])],1):e._e(),e._v(" "),1==e.log?r("li",[r("router-link",{attrs:{to:"/profile"}},[e._v("Mina sidor")])],1):e._e(),e._v(" "),1==e.log?r("li",[r("a",{staticClass:"logout-link",attrs:{href:""},on:{click:e.logout}},[e._v("Logga ut")])]):e._e()])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"logo-container"}},[t("a",{attrs:{href:"#home"}},[t("h2",[this._v("Biblioteket")])])])}]};var o={name:"App",components:{Navbar:r("VU/8")(n,s,!1,function(e){r("ISM9")},"data-v-298a249e",null).exports}},i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("navbar"),this._v(" "),t("router-view")],1)},staticRenderFns:[]};var u=r("VU/8")(o,i,!1,function(e){r("/6Eg")},null,null).exports,l=r("/ocq"),d={beforeCreate:function(){var e=localStorage.usertoken;this.log=!!e}},p={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{attrs:{id:"image-container"}}),e._v(" "),r("div",{attrs:{id:"banner-text"}},[e._m(0),e._v(" "),0==e.log?r("p",[e._v("\n      Vänligen\n      "),r("router-link",{attrs:{to:"/login"}},[e._v(" logga in ")]),e._v("eller\n      "),r("router-link",{attrs:{to:"/register"}},[e._v(" registrera dig ")]),e._v("för att kunna ta del av innehållet på webbplatsen\n    ")],1):e._e(),e._v(" "),1==e.log?r("p",[e._v("\n      Läs och lägg till böcker\n      "),r("router-link",{attrs:{to:"/posts"}},[e._v(" här ")]),e._v("eller gå till mina sidor\n      "),r("router-link",{attrs:{to:"/profile"}},[e._v(" här ")])],1):e._e()])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",[this._v("\n      Välkommen till\n      "),t("span",{attrs:{id:"banner-logo"}},[this._v("Biblioteket")])])}]};var v=r("VU/8")(d,p,!1,function(e){r("5Lc5")},"data-v-11d44500",null).exports,c=r("Xxa5"),m=r.n(c),_=r("exGp"),g=r.n(_),f=r("Dd8w"),h=r.n(f),b=r("//Fk"),k=r.n(b),w=r("Zrlr"),x=r.n(w),C=r("wxAW"),y=r.n(C),E=r("mtWM"),B=r.n(E),P="/api/books/",A=function(){function e(){x()(this,e)}return y()(e,null,[{key:"getBooks",value:function(){var e,t=this;return new k.a((e=g()(m.a.mark(function e(r,a){var n,s;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.get(P);case 3:n=e.sent,s=n.data,r(s.map(function(e){return h()({},e)})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a(e.t0);case 11:case"end":return e.stop()}},e,t,[[0,8]])})),function(t,r){return e.apply(this,arguments)}))}},{key:"getBooksByUser",value:function(e){var t,r=this;return new k.a((t=g()(m.a.mark(function t(a,n){var s,o;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.a.get(P+"user/?name="+e);case 3:s=t.sent,o=s.data,a(o.map(function(e){return h()({},e)})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(t.t0);case 11:case"end":return t.stop()}},t,r,[[0,8]])})),function(e,r){return t.apply(this,arguments)}))}},{key:"addBook",value:function(e,t,r,a,n){return B.a.post(P,{title:e,author:t,published:r,pages:a,user:n})}},{key:"deleteBook",value:function(e){return B.a.delete(""+P+e)}},{key:"updateBook",value:function(e,t,r,a,n){return B.a.put(""+P+e,{title:t,author:r,published:a,pages:n})}}]),e}(),U=r("ytdl"),L=r.n(U),F={name:"Posts",data:function(){var e=localStorage.usertoken;return e?{username:L()(e).username,books:[],id:"",error:"",title:"",author:"",published:"",pages:""}:{username:"",books:[],id:"",error:"",title:"",author:"",published:"",pages:""}},created:function(){var e=this;return g()(m.a.mark(function t(){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A.getBooks();case 3:e.books=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e.error=t.t0.message;case 9:case"end":return t.stop()}},t,e,[[0,6]])}))()},methods:{addBook:function(){var e=this;return g()(m.a.mark(function t(){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.addBook(e.title,e.author,e.published,e.pages,e.username);case 2:return t.next=4,A.getBooks();case 4:e.books=t.sent,location.reload();case 6:case"end":return t.stop()}},t,e)}))()},showAddedDiv:function(){$("#added-div").addClass("on"),$("#added-div").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(e){$("#added-div").removeClass("on")})}},beforeCreate:function(){localStorage.usertoken||J.push({name:"Login"})}},N={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper"},[r("div",{staticClass:"container"},[e.error?r("p",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),e._v(" "),r("form",{attrs:{id:"add-form"}},[r("h2",[e._v("Lägg till bok")]),e._v(" "),r("label",{attrs:{for:"title"}},[e._v("Titel")]),e._v(" "),r("br"),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],attrs:{type:"text",id:"title",placeholder:"Titel",required:""},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}}),e._v(" "),r("br"),e._v(" "),r("label",{attrs:{for:"author"}},[e._v("Författare")]),e._v(" "),r("br"),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.author,expression:"author"}],attrs:{type:"text",id:"author",placeholder:"Författare",required:""},domProps:{value:e.author},on:{input:function(t){t.target.composing||(e.author=t.target.value)}}}),e._v(" "),r("br"),e._v(" "),r("label",{attrs:{for:"published"}},[e._v("Publiceringsår")]),e._v(" "),r("br"),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.published,expression:"published"}],attrs:{type:"number",id:"published",placeholder:"Publiceringsår",required:""},domProps:{value:e.published},on:{input:function(t){t.target.composing||(e.published=t.target.value)}}}),e._v(" "),r("br"),e._v(" "),r("label",{attrs:{for:"add-book"}},[e._v("Antal sidor")]),e._v(" "),r("br"),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.pages,expression:"pages"}],attrs:{type:"number",id:"pages",placeholder:"Antal sidor"},domProps:{value:e.pages},on:{input:function(t){t.target.composing||(e.pages=t.target.value)}}}),e._v(" "),r("br"),e._v(" "),r("button",{staticClass:"add-button",attrs:{id:"add",disabled:!(e.title.trim()&&e.author.trim()&&e.published.trim()&&e.pages.trim())},on:{click:function(t){e.addBook(),e.showAddedDiv()}}},[e._v("Lägg till bok")])]),e._v(" "),r("h2",[e._v(" Tillagda böcker")]),e._v(" "),r("div",{staticClass:"books-container"},e._l(e.books,function(t,a){return r("div",{key:t._id,staticClass:"book",attrs:{item:t,index:a}},[r("p",{staticClass:"title"},[e._v("Titel: "+e._s(t.title))]),e._v(" "),r("p",{staticClass:"author"},[e._v("Författare: "+e._s(t.author))]),e._v(" "),r("p",{staticClass:"published"},[e._v("Publiceringsår: "+e._s(t.published))]),e._v(" "),r("p",{staticClass:"pages"},[e._v("Antal sidor: "+e._s(t.pages))]),e._v(" "),r("p",{staticClass:"user"},[e._v("Tillagd av: "+e._s(t.user))]),e._v(" "),r("i",{staticClass:"fas fa-book"})])}),0)]),e._v(" "),e._m(0)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"added-div"}},[t("p",[this._v("Din bok läggs till!")])])}]};var T=r("VU/8")(F,N,!1,function(e){r("wrbs")},"data-v-dbb4246e",null).exports,q={data:function(){return{email:"",password:"",loginError:""}},methods:{login:function(){var e=this;B.a.post("users/login",{email:this.email,password:this.password}).then(function(t){localStorage.setItem("usertoken",t.data),e.email="",e.password="",404!=t.status&&(J.push({name:"Profile"}),location.reload())}).catch(function(t){e.loginError="Felaktiga inloggningsuppgifter!"})}}},D={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("form",{attrs:{id:"login-form"},on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[r("h2",[e._v("Logga in här")]),e._v(" "),e.loginError?r("p",{staticClass:"loginError"},[e._v(e._s(e.loginError))]):e._e(),e._v(" "),r("label",{attrs:{for:"email"}},[e._v("E-postadress")]),e._v(" "),r("br"),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"email",name:"email",placeholder:"Ange din e-postadress",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),e._v(" "),r("br"),e._v(" "),r("label",{attrs:{for:"password"}},[e._v("Lösenord")]),e._v(" "),r("br"),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",name:"password",placeholder:"Ange lösenord",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._v(" "),r("br"),e._v(" "),r("button",{attrs:{type:"submit",disabled:!e.email.trim().includes("@")||!e.password.trim()}},[e._v("Logga in")])])])},staticRenderFns:[]};var I=r("VU/8")(q,D,!1,function(e){r("wLQ7")},"data-v-f089bb9a",null).exports,R={data:function(){return{username:"",email:"",password:"",passwordTwo:"",registerError:""}},methods:{validatePassword:function(){this.password!==this.passwordTwo?this.registerError="Lösenorden stämmer inte överens!":this.register()},register:function(){B.a.post("users/register",{username:this.username,email:this.email,password:this.password}).then(function(e){J.push({name:"Login"})}).catch(function(e){console.log(e)})}}},M={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("form",{attrs:{id:"register-form"},on:{submit:function(t){return t.preventDefault(),e.validatePassword(t)}}},[r("h2",[e._v("Registrera konto här")]),e._v(" "),e.registerError?r("p",{staticClass:"registerError"},[e._v(e._s(e.registerError))]):e._e(),e._v(" "),r("label",{attrs:{for:"username"}},[e._v("Användarnamn")]),e._v(" "),r("br"),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",name:"username",placeholder:"Användarnamn",required:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),r("br"),e._v(" "),r("label",{attrs:{for:"email"}},[e._v("E-postadress")]),e._v(" "),r("br"),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"email",name:"email",placeholder:"Ange din e-postadress",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),e._v(" "),r("br"),e._v(" "),r("label",{attrs:{for:"password"}},[e._v("Lösenord")]),e._v(" "),r("br"),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",name:"password",placeholder:"Ange lösenord",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._v(" "),r("br"),e._v(" "),r("label",{attrs:{for:"passwordtwo"}},[e._v("Upprepa lösenord")]),e._v(" "),r("br"),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.passwordTwo,expression:"passwordTwo"}],attrs:{type:"password",name:"passwordTwo",placeholder:"Upprepa lösenordet",required:""},domProps:{value:e.passwordTwo},on:{input:function(t){t.target.composing||(e.passwordTwo=t.target.value)}}}),e._v(" "),r("br"),e._v(" "),r("button",{attrs:{type:"submit",disabled:!(e.email.trim().includes("@")&&e.username.trim()&&e.password.trim()&&e.passwordTwo.trim())}},[e._v("Registrera")])])])},staticRenderFns:[]};var S=r("VU/8")(R,M,!1,function(e){r("G+KZ")},"data-v-eb4541d2",null).exports,V={data:function(){var e=localStorage.usertoken;if(e){var t=L()(e);return{username:t.username,email:t.email,ubooks:[],uid:"",uerror:"",utitle:"",uauthor:"",upublished:"",upages:""}}return{username:"",email:"",ubooks:[],uid:"",uerror:"",utitle:"",uauthor:"",upublished:"",upages:""}},created:function(){var e=this;return g()(m.a.mark(function t(){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A.getBooksByUser(e.username);case 3:e.ubooks=t.sent,0==e.ubooks.length&&(e.uerror="Du har inga publicerade böcker"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()},methods:{deleteBook:function(e){var t=this;return g()(m.a.mark(function r(){return m.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,A.deleteBook(e);case 2:return r.next=4,A.getBooksByUser();case 4:t.ubooks=r.sent,location.reload();case 6:case"end":return r.stop()}},r,t)}))()},showUpdateBox:function(e,t,r,a,n){var s=this;return g()(m.a.mark(function o(){return m.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:document.getElementById("update-form").style.display="block",document.getElementById("update-id").value=e,document.getElementById("update-title").value=t,document.getElementById("update-author").value=r,document.getElementById("update-published").value=a,document.getElementById("update-pages").value=n,s.uid=e,s.utitle=t,s.uauthor=r,s.upublished=a,s.upages=n;case 11:case"end":return o.stop()}},o,s)}))()},updateBook:function(){var e=this;return g()(m.a.mark(function t(){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.updateBook(e.uid,e.utitle,e.uauthor,e.upublished,e.upages);case 2:return document.getElementById("update-form").style.display="none",t.next=5,A.getBooksByUser();case 5:e.ubooks=t.sent,location.reload();case 7:case"end":return t.stop()}},t,e)}))()},closeUpdateForm:function(){document.getElementById("update-form").style.display="none"},showUpdatedDiv:function(){$("#updated-div").addClass("on"),$("#updated-div").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(e){$("#updated-div").removeClass("on")})},showDeletedDiv:function(){$("#deleted-div").addClass("on"),$("#deleted-div").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(e){$("#deleted-div").removeClass("on")})}},beforeCreate:function(){localStorage.usertoken||J.push({name:"Login"})}},H={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper"},[r("div",{staticClass:"container"},[r("div",{staticClass:"user-information"},[r("h2",[e._v("Mina uppgifter")]),e._v(" "),r("p",[e._v("Användarnamn: "+e._s(e.username))]),e._v(" "),r("p",[e._v("E-postadress: "+e._s(e.email))]),e._v(" "),r("i",{staticClass:"fas fa-user"})]),e._v(" "),r("form",{attrs:{id:"update-form"}},[r("div",{staticClass:"cross",on:{click:e.closeUpdateForm}},[e._v("x")]),e._v(" "),r("h2",[e._v("Uppdatera bok")]),e._v(" "),r("label",{attrs:{for:"update-id"}},[e._v("ID")]),e._v(" "),r("br"),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.uid,expression:"uid"}],attrs:{type:"text",id:"update-id",disabled:""},domProps:{value:e.uid},on:{input:function(t){t.target.composing||(e.uid=t.target.value)}}}),e._v(" "),r("br"),e._v(" "),r("label",{attrs:{for:"update-title"}},[e._v("Titel")]),e._v(" "),r("br"),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.utitle,expression:"utitle"}],attrs:{type:"text",id:"update-title",required:""},domProps:{value:e.utitle},on:{input:function(t){t.target.composing||(e.utitle=t.target.value)}}}),e._v(" "),r("br"),e._v(" "),r("label",{attrs:{for:"update-author"}},[e._v("Författare")]),e._v(" "),r("br"),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.uauthor,expression:"uauthor"}],attrs:{type:"text",id:"update-author",required:""},domProps:{value:e.uauthor},on:{input:function(t){t.target.composing||(e.uauthor=t.target.value)}}}),e._v(" "),r("br"),e._v(" "),r("label",{attrs:{for:"update-published"}},[e._v("Publiceringsår")]),e._v(" "),r("br"),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.upublished,expression:"upublished"}],attrs:{type:"number",id:"update-published",placeholder:"Publiceringsår",required:""},domProps:{value:e.upublished},on:{input:function(t){t.target.composing||(e.upublished=t.target.value)}}}),e._v(" "),r("br"),e._v(" "),r("label",{attrs:{for:"update-pages"}},[e._v("Antal sidor")]),e._v(" "),r("br"),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.upages,expression:"upages"}],attrs:{type:"number",id:"update-pages",placeholder:"Antal sidor",required:""},domProps:{value:e.upages},on:{input:function(t){t.target.composing||(e.upages=t.target.value)}}}),e._v(" "),r("br"),e._v(" "),r("button",{attrs:{disabled:!(e.utitle.trim()&&e.uauthor.trim()&&e.upublished&&e.upages)},on:{click:function(t){e.updateBook(),e.showUpdatedDiv()}}},[e._v("Uppdatera bok")])]),e._v(" "),r("div",{staticClass:"user-books"},[r("h2",[e._v("Mina publicerade böcker")]),e._v(" "),e.uerror?r("p",{staticClass:"message"},[e._v(e._s(e.uerror))]):e._e(),e._v(" "),r("div",{staticClass:"books-container"},e._l(e.ubooks,function(t,a){return r("div",{key:t._id,staticClass:"book",attrs:{item:t,index:a}},[r("p",{staticClass:"title"},[e._v("Titel: "+e._s(t.title))]),e._v(" "),r("p",{staticClass:"author"},[e._v("Författare: "+e._s(t.author))]),e._v(" "),r("p",{staticClass:"published"},[e._v("Publiceringsår: "+e._s(t.published))]),e._v(" "),r("p",{staticClass:"pages"},[e._v("Antal sidor: "+e._s(t.pages))]),e._v(" "),r("button",{staticClass:"delete-button",on:{click:function(r){e.deleteBook(t._id),e.showDeletedDiv()}}},[e._v("Radera")]),e._v(" "),r("button",{staticClass:"update-button",on:{click:function(r){return e.showUpdateBox(t._id,t.title,t.author,t.published,t.pages)}}},[e._v("Uppdatera")])])}),0)])]),e._v(" "),e._m(0),e._v(" "),e._m(1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"updated-div"}},[t("p",[this._v("Boken uppdateras!")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"deleted-div"}},[t("p",[this._v("Boken raderas!")])])}]};var G=r("VU/8")(V,H,!1,function(e){r("wFJC")},"data-v-0f846734",null).exports;a.a.use(l.a);var J=new l.a({routes:[{path:"/",name:"Home",component:v},{path:"/login",name:"Login",component:I},{path:"/register",name:"Register",component:S},{path:"/profile",name:"Profile",component:G},{path:"/posts",name:"Posts",component:T}]});a.a.config.productionTip=!1,new a.a({el:"#app",router:J,components:{App:u},template:"<App/>"})},wFJC:function(e,t){},wLQ7:function(e,t){},wrbs:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.f809d56d57bee917d989.js.map